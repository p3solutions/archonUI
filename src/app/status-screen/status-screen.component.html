<div class="workspacelist-container">
    
    <div class="col-md-4">
      <div class="col-md-1 back-arrow">
        <a (click)="gotoBack()" data-tooltip="Back">
          <i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i>
        </a>
      </div>

      <div class="col-md-8">
        <h3 class="workspace-panel-heading">
          Status Monitor <span id="loading-icon" [ngClass]="{'archon-loading-icon' : !statusList}"></span>
        </h3>
      </div>
    </div>

    <div class="col-md-12 m-l-30">
      <div class="btn-group col-md-2">
        <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
          title="{{currentService? currentService.serviceName : 'JOB ORIGIN: All'}}">
          {{currentService? currentService.serviceName : ('JOB ORIGIN: All')}}
        </button>
        <div class="dropdown-menu " id="service-list-dropdown">
          <div class="scrollable">
            <a class="dropdown-item dropdown-data trim-text" title="JOB ORIGIN: ALL"
            (click)="selectService()">JOB ORIGIN: ALL</a>
            <div class="dropdown-divider"></div>
             <a class="dropdown-item dropdown-data trim-text" *ngFor="let service of serviceActions" title="{{service.serviceName}}"
             (click)="selectService(service)" >{{service.serviceName}}</a>
          </div>
        </div>
      </div>
      <div class="btn-group col-md-2">
        <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
          title="{{currentJobStatus? currentJobStatus : 'JOB STATUS: ALL'}}">
          {{currentJobStatus? currentJobStatus : 'JOB STATUS: All'}}
        </button>
        <div class="dropdown-menu " id="service-list-dropdown">
          <div class="scrollable">
            <a class="dropdown-item dropdown-data trim-text" title="JOB ORIGIN: ALL"
              (click)="selectJobStatus()">JOB STATUS: All</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item dropdown-data trim-text" *ngFor="let jStatus of jobStatusList" title="{{jStatus}}"
             (click)="selectJobStatus(jStatus)">{{jStatus}}</a>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-12">
      <div class="row">
        <div id="status-monitor" class="workspace-panel-content col-md-11">
          <table id="status-table" datatable class="display text-center" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th></th>
                  <th class="text-center">Job ID</th>
                  <th class="text-center">Scheduled Time</th>
                  <th class="text-center">Start Time</th>
                  <th class="text-center">End Time</th>
                  <th class="text-center">Status</th>
                  <th class="text-center">Details</th>
                  <th class="text-center">Retry</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let statusObj of statusList; let ind = index">
                <td>{{ind + 1}}</td>
                <td>{{statusObj.jobId}}</td>
                <td>{{statusObj.scheduledTime | date: 'short'}}</td>
                <td>{{statusObj.startTime | date: 'short'}}</td>
                <td>{{statusObj.endTime | date: 'short'}}</td>
                <td>
                  <span *ngIf="statusObj.status === 'completed'" >
                    <i class="fa fa-check-circle col-green fa-lg" aria-hidden="true"></i>
                    <span class="hide">completed</span>
                  </span>
                  <span *ngIf="statusObj.status === 'failed'" >
                    <i *ngIf="statusObj.status === 'failed'" class="fa fa-times-circle col-red fa-lg" aria-hidden="true"></i>
                    <span class="hide">failed</span>
                  </span>
                  <span *ngIf="statusObj.status === 'running'" >
                    <i *ngIf="statusObj.status === 'running'" class="fa fa-clock-o col-archon-blue fa-lg" aria-hidden="true"></i>
                    <span class="hide">running</span>
                  </span>
                </td>
                <td>
                    <i (click)="showStatusInfo(statusObj.jobId)" class="fa fa-info-circle col-archon-blue fa-lg" aria-hidden="true"></i>
                </td>
                <td>
                  <span *ngIf="statusObj.status === 'failed'" >
                    <i class="fa fa-repeat col-orange fa-lg" aria-hidden="true"></i>
                    <span class="hide">retry</span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="workspace-panel-content">
        <button (click)="gotoDashboard()" type="submit" class="btn btn-primary pull-right btn-form">Back</button>
      </div>
    </div>

</div>

