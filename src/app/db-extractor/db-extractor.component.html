<!-- <div>
  <div class="row">
    <div class="col-md-6">
      <div class="col-md-1 back-arrow">
        <a (click)="gotoDashboard()" data-tooltip="Back">
          <i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i>
        </a>
      </div>
      <div class="col-md-8">
        <h3 class="extractor-panel-heading">
          RDBMS Extractor
        </h3>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <br>
      <div class="card">
        <div class="card-body">
          <br>
          <div class="progress" id="db-extractor-progress-bar">
            <div class="progress-bar progress-bar-step progress-bar-primary" role="progressbar" style="width:33.33%">
              Select Process
            </div>
            <div *ngIf="progressBarObj.stepTwoProgBarValue>0" class="progress-bar progress-bar-step progress-bar-primary" role="progressbar" [style.width.%]="progressBarObj.stepTwoProgBarValue">
              Select Parameters
            </div>
            <div *ngIf="progressBarObj.stepThreeProgBarValue>0" class="progress-bar progress-bar-step progress-bar-primary" role="progressbar" [style.width.%]="progressBarObj.stepThreeProgBarValue">
              Summary
            </div>
          </div>
        </div>
        <br>
        <div class="card-body">
          <router-outlet></router-outlet>
        </div>
      </div>
    </div>
  </div>
</div> -->
<div class="col-md-12" style="padding-left: 22%; padding-right: 22%">
    <div class="col-md-12"> 
            <div class="back-arrow-icon">
              <a (click)="gotoDashboard()" data-tooltip="Back">
                <i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i>
              </a>
            </div>
              <h3 class="extractor-panel-heading">
                RDBMS Extractor
              </h3>
    </div>
    <div class="col-md-12"> 
        <ul class="flex-container flex-end">
          <li class="flex-item"><strong> Workspace Name:</strong> {{workspaceName | uppercase}}</li>
          <li class="flex-item"><strong>Database Profile:</strong> {{configuredDB.profileName}}  &nbsp; <a data-toggle="modal" href="#RDBMSDB-detailConfig"><i class="fa fa-info-circle fa-1x"></i></a></li>
        </ul>                 
    </div>











    <div class="col-md-12">  
        <div class="card card-3">    
          <div class="col-md-12" style="padding-right: 0px; padding-left: 0px;">  
          <div class="col-md-6">
            <mat-form-field>
              <mat-label>Process</mat-label>
              <mat-select #processSelector="ngModel" name="process" [(ngModel)]="processDetailsObj.process"
               required (selectionChange)="getOutputFormatListBySecProcess(processSelector.value)">
                  <mat-option [value]="null">Select Process To Excecute</mat-option>
                  <mat-option *ngFor="let item of processList" [value]="item">{{item}}</mat-option>
                  <!-- <mat-option value="Data">Extract Data</mat-option>
                  <mat-option value="Query">Execute Query</mat-option>
                  <mat-option value="Count">Get Record Count</mat-option> -->
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-6">           
          </div>
          </div>

          
          <div class="col-md-6">
              <mat-form-field>
                  <mat-label>Output format</mat-label>
                  <mat-select required #outputFormatSelector="ngModel" name="outputFormatName" [(ngModel)]="processDetailsObj.outputFormat"
                  (selectionChange)="setOutputFormat(outputFormatSelector.value)">
                      <mat-option [value]="null">Select output format</mat-option>
                      <mat-option *ngFor="let item of outputFormatList" [value]="item">{{item}}</mat-option>                     
                  </mat-select>
                </mat-form-field>
          </div>
          <div class="col-md-6">
              <mat-form-field>
                  <input matInput name="tableIncRule" [disabled]="isDisabled" [(ngModel)]="processDetailsObj.tableIncRule" id="tableIncRule" placeholder="Table Inclusion Rule">
                </mat-form-field>
          </div>
          <div *ngIf="sipData">          
          <div class="col-md-6">
              <mat-form-field>
                  <input matInput name="sipApplicationName" [(ngModel)]="processDetailsObj.sipApplicationName" id="sipApplicationName"  placeholder="Enter SIP Application Name" required>
                </mat-form-field>
          </div>
          <div class="col-md-6">
              <mat-form-field>
                  <input matInput name="holdingPrefix" [(ngModel)]="processDetailsObj.holdingPrefix" id="holdingPrefix"  placeholder="Enter Holding Prefix" required>
                </mat-form-field>
          </div>
          </div>
         

          <!--view start only query mode-->
          <div *ngIf="isDisabled">
          <div class="col-md-12">
              <mat-form-field>
                  <input matInput placeholder="Query Name" value="" required>
                </mat-form-field>
          </div>
          <div class="col-md-12" style="padding-right: 0px; padding-left: 0px;">  
              <div class="col-md-6" style="margin-top: 7px;">
                  <mat-slide-toggle (change)="setUploadQueryFile($event)">Read Query from file</mat-slide-toggle>
              </div>
              <div class="col-md-6" *ngIf="showFileUpload">  
                  <div class="action-btn" style="float: left">                     
                      <button class="btn file btn-padding" onclick="document.getElementById('uploadReadQueryFile').click()">File Upload</button> 
                      <input type="file" class="hide btn btn-secondary browse-btn" accept=".sql" id="uploadReadQueryFile" (change)="uploadQueryFile($event.target.files)"  >
                      <button *ngIf="uploadData" class="btn file-name btn-padding" title="{{queryFileName}}" (click)="closeMessage()">
                        <div style="width: 85%; overflow: hidden; text-overflow: ellipsis; display: inherit; float: left; text-align: left;">{{queryFileName}}</div>
                        <a><button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button></a></button>                
                    </div>        
              </div>
          </div>

          <div *ngIf="!showFileUpload">
          <div class="col-md-12 query">Query </div>
          <div class="col-md-12" style="margin-bottom: 15px">  
              <ace-editor
              #editor [mode]="'sql'"
               style="height:200px;">
              </ace-editor>
          </div>
          </div>

          </div>
           <!--view end only query mode -->


          <div class="col-md-12">
          <div class="bg">Modify Default parameters
            </div>
        </div>
        <div class="col-md-12">
        <div class="col-md-6">
            <mat-form-field>
                <mat-label>XML File Split Size(MB)</mat-label>
                <mat-select [ngModel]="processDetailsObj?.xmlSplitFileSize" (selectionChange)="setXMLFileSplitSize($event.value)">
                    <mat-option [value]="100">100</mat-option> 
                    <mat-option [value]="200">200</mat-option> 
                    <mat-option [value]="300">300</mat-option> 
                    <mat-option [value]="400">400</mat-option> 
                    <mat-option [value]="500">500</mat-option>
                    <mat-option [value]="600">600</mat-option> 
                    <mat-option [value]="700">700</mat-option> 
                    <mat-option [value]="800">800</mat-option> 
                    <mat-option [value]="900">900</mat-option>  
                    <mat-option [value]="1000">1000</mat-option>
                </mat-select>
              </mat-form-field>
        </div>
        <div class="col-md-6">
            <mat-form-field>
                <mat-label>Maximum Parallel Process</mat-label>
                <mat-select [ngModel]="processDetailsObj?.maxParallelProcess" (selectionChange)="setMaxParallelProcess($event.value)">
                    <mat-option [value]="1">1</mat-option> 
                    <mat-option [value]="2">2</mat-option> 
                    <mat-option [value]="3">3</mat-option> 
                    <mat-option [value]="4">4</mat-option> 
                    <mat-option [value]="5">5</mat-option>
                    <mat-option [value]="6">6</mat-option> 
                    <mat-option [value]="7">7</mat-option> 
                    <mat-option [value]="8">8</mat-option> 
                    <mat-option [value]="9">9</mat-option> 
                    <mat-option [value]="10">10</mat-option> 
                </mat-select>
              </mat-form-field>
        </div>
        </div>
        <div class="col-md-12">
        <div class="col-md-6"><mat-checkbox (ngModelChange)="processDetailsObj.incTable=$event" [ngModel]="processDetailsObj?.incTable">Include Table</mat-checkbox></div>
        <div class="col-md-6"><mat-checkbox (ngModelChange)="processDetailsObj.incView=$event" [ngModel]="processDetailsObj?.incView">Include Views</mat-checkbox></div>
      </div>
      <div class="col-md-12">
        <div class="col-md-6"><mat-checkbox (ngModelChange)="processDetailsObj.xmlXDBCompability=$event" [ngModel]="processDetailsObj?.xmlXDBCompability">Date in XML for XML compability</mat-checkbox></div>
        <div class="col-md-6"><mat-checkbox (ngModelChange)="processDetailsObj.extractLOBWithXML=$event" [ngModel]="processDetailsObj?.extractLOBWithXML">Extract LOB Within XML</mat-checkbox></div>
      </div>
    </div>            
</div>
<div class="col-md-12"> 
    <div class="action-btn">
    <button class="btn cancel btn-padding" (click)="gotoDashboard();">Cancel</button>
    <button class="btn {{ExtractData? 'save-disabled': 'save'}} btn-padding" [disabled]="ExtractData" (click)="gotoLastStep()" data-toggle="modal" href="#openScheduleJob">Schedule</button>                
  </div>
</div>
</div>

















<div id="RDBMSDB-detailConfig" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="info-popup-header-cls">
            <h4 class="popup-title-cls">
              <i class="material-icons popup-material-icon-cls" style="font-size: 22px;margin-top: 3px;">info_outline</i><div class="pop-title" style="margin-left: 0px;margin-top: 3px;">Database Profile</div></h4>
          </div>
       <table class="table table-hover">
        <tbody>
            <tr>
                <td class="tdl">Database Profile Name</td>
                <td class="tdr">{{configuredDB.profileName}}</td>
              </tr>
              <tr>
                <td class="tdl">Database Type</td>
                <td class="tdr">{{configuredDB.type}}</td>
              </tr>
              <tr>
                <td class="tdl">Database Host/Ip</td>
                <td class="tdr">{{configuredDB.host}}</td>
              </tr>
              <tr>
                <td class="tdl">Database Port</td>
                <td class="tdr">{{configuredDB.port}}</td>
              </tr>
              <tr>
                <td class="tdl">Database Name</td>
                <td class="tdr">{{configuredDB.databaseName}}</td>
              </tr>
              <tr>
                <td class="tdl">Database Schema</td>
                <td class="tdr">{{configuredDB.schemaName}}</td>
              </tr>
              <tr>
                <td class="tdl">Database User Name</td>
                <td class="tdr">{{configuredDB.userName}}</td>
              </tr>         
        </tbody>
      </table>
      <div class="modal-footer">
        <button type="button" class="btn btn-padding btn-info-popup-primary-color" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<app-schedule-job class="modal fade" id="openScheduleJob" role="dialog" (ObjectEmit)="Start($event)"></app-schedule-job>
<button #click data-toggle="modal" href="#successModel" [hidden]="true"></button>
<div id="successModel" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 480px;">
            <div class="info-popup-header-cls">
                <h4 class="popup-title-cls">
                  <i class="material-icons popup-material-icon-cls" style="font-size: 22px;margin-top: 3px;">info_outline</i><div class="pop-title" style="margin-left: 0px;margin-top: 3px;">Message</div></h4>
              </div>
            <div class="modal-body">
             <p class="popup-paragraph-cls"> {{successMsg}}</p>
             <p *ngIf="isSuccessMsg" class="popup-paragraph-cls">Check on Job Status page</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-padding btn-info-popup-primary-color" data-dismiss="modal" (click)="close()">Close</button>
              </div>
            </div>
    </div>
</div>