<div class="row">
  <div class="col-md-3">
    <mat-card id="left-card" class="example-card">
      <mat-card-header class="header-blue">
        <mat-card-title>Selection Details</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>
          <mat-radio-group>
            <mat-radio-button color="primary" value="tbl">Table Search</mat-radio-button>
            <mat-radio-button color="primary" value="col">Column Search</mat-radio-button>
          </mat-radio-group>
        </p>
        <p>
          <mat-form-field appearance="outline">
            <input #search matInput (keyup)="filterTableAndColumn(search.value)" placeholder="Search Table">
          </mat-form-field>
        </p>
        <p>
          <mat-tree cdkDropList #column="cdkDropList" [cdkDropListConnectedTo]="['drag-search-column','drag-panel-column']"
            [cdkDropListData]="dataSource" (cdkDropListDropped)="drop($event)" #tree [dataSource]="dataSource"
            [treeControl]="treeControl">
            <mat-tree-node [ngClass]="node.node.visible===false ? 'hide-node' : ''" [cdkDragDisabled]="node.node.type=='Table'"
              [cdkDragData]="node" *matTreeNodeDef="let node" cdkDrag matTreeNodePadding>
              <button mat-icon-button disabled></button><i [ngClass]="node.node.type=='Table'? 'fa fa-table' : 'fa fa-columns'"
                aria-hidden="true"></i>
              {{node.node.name | uppercase}}
            </mat-tree-node>
            <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
              <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.node.name">
                <i [ngClass]="treeControl.isExpanded(node) ? 'fa fa-chevron-down' : 'fa fa-chevron-right'">
                </i>
              </button><i class="fa fa-table" aria-hidden="true"></i>
              {{node.node.name | uppercase}}
            </mat-tree-node>
          </mat-tree>
        </p>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="col-md-9">
    <div style="padding-bottom: 12px;">
      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header id="search-column-header">
            <mat-panel-title>
              Drag a column to create a search field
            </mat-panel-title>
          </mat-expansion-panel-header>
          <app-adhoc-search-screen *ngIf="!isSearchScreen" (updateSearchCriteriaLength)="updateSearchCriteriaLength($event)"
            (showEditEvent)="showEdit($event)"></app-adhoc-search-screen>
          <app-adhoc-edit-search-screen-popup (showSearchEvent)="showSearch($event)" *ngIf="isSearchScreen"></app-adhoc-edit-search-screen-popup>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <div *ngIf="searchCriteriaLength!==0">
      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header id="drag-panel-column-header">
            <mat-panel-title>
              Search Result Screen Design
            </mat-panel-title>
          </mat-expansion-panel-header>
          <app-adhoc-search-panel *ngIf="!isPanelColumnScreen" (searchResultLength)=searchResultLengthFn($event)
            (showPanelEditEvent)="showPanelEdit($event)" (sidePanelTabChange)="sidePanelTabChange($event)"
            (inlinePanelTabChange)="inlinePanelTabChange($event)" (panelChanged)="onPanelChanged($event)"></app-adhoc-search-panel>
          <app-adhoc-edit-panel-column-popup [openedPanelIndex]="openedPanelIndex" [inlinePanelTab]="inlinePanelTab"
            [sidePanelTab]="sidePanelTab" (showPanelSearchColumnEvent)="showPanelSearchColumn($event)" *ngIf="isPanelColumnScreen"></app-adhoc-edit-panel-column-popup>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
</div>
<div class="row" id="nextbtn">
  <button type="button" class="btn btn-primary next btn-sm" [disabled]="searchResultLength===0||searchCriteriaLength===0"
    (click)="gotoNestedScreen()" style="float: right;margin-right: 12px">Next</button>
  <button class="btn btn-primary Previous btn-sm" (click)="gotoGraph()" style="float:right;margin-right:5px;">
    Back</button>
  <button class="btn Previous btn-sm" id="clearBtn" (click)="clear()" style="float:right;margin-right:5px;">
    clear</button>
</div>
