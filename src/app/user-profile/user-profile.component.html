<app-navbar></app-navbar>
<div>
  <div class="row">
    <div class="col-md-6">
      <div class="col-md-1 back-arrow">
        <a (click)="gotoDashboard()">
          <i class="fa fa-arrow-left fa-lg" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Back"></i>
        </a>
      </div>
      <div class="col-md-8">
        <h3 class="workspace-panel-heading">
          User Profile
        </h3>
      </div>
    </div>
    <div class="col-md-5 m-10 pull-right">
      <button data-toggle="modal" data-target="#changePasswordModal" class="btn btn-primary pull-right btn-form">Change Password</button>
      <app-change-password [userId]="userInfo?.id"></app-change-password>
    </div>
  </div>
  
  <div class="row">
    <div id="user-info" class="workspace-panel-content col-md-12 text-left" [attr.data-user-id]="userInfo?.id">
      <table class="table table-hover">
        <tbody>
          <tr>
            <td class="col-md-2 col-title">
              <b>Name</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.name}}
              <span>
                <i aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Edit" class="m-10 glyphicon glyphicon-pencil link" (click)="focusOnInputBox()" data-toggle="modal" data-target="#editProfileModal"></i>
              </span>
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Email</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.email}}
              <!-- <span>
                 <i class="m-10 glyphicon glyphicon-pencil link"  data-toggle="modal" data-target="#editProfileModal"></i>
                <i class="m-10 glyphicon glyphicon-pencil"></i>                
              </span> -->
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Global Role</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.roleList?.join(', ')}}
              <!-- <span>
                <a [routerLink]="" class="m-10">Edit
                <i class="m-10 glyphicon glyphicon-pencil"></i>
              </a>
              </span> -->
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Workspaces</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
                <span class="m-r-10" *ngFor="let workspace of userInfo?.workspaceList; let isLast=last">
                   <a [routerLink]="">{{workspace.name}}</a>{{isLast ? '' : ', '}}
                </span>
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-11 pull-right">
      <button (click)="gotoDashboard()" type="submit" class="m-10 btn btn-primary pull-right btn-form">Back</button>
    </div>
  </div>
</div>
<app-edit-profile [userid]="userInfo?.id" [username]="userInfo?.name" [useremail]="userInfo?.email"
 (onUpdateProfile)="onUpdateProfile($event)"></app-edit-profile>
