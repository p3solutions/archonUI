<app-navbar></app-navbar>
<div>
  <div class="row">
    <div class="col-md-4">
      <div class="col-md-1 back-arrow">
        <a data-tooltip="Back" (click)="gotoDashboard()">
          <i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i>
        </a>
      </div>
      <div class="col-md-8">
        <h3 class="workspace-panel-heading">
          User Profile
        </h3>
      </div>
    </div>
    <div *ngIf="successMessage" class="col-md-3 alert alert-success" role="alert" data-auto-dismiss="2000">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <strong>Name Changed Successfully.</strong>
    </div>
    <div class="col-md-3 m-10 pull-right">
      <button data-toggle="modal" data-target="#changePasswordModal" class="btn btn-primary pull-right btn-form">Change
        Password</button>
      <app-change-password [userId]="userInfo?.id"></app-change-password>
    </div>
  </div>

  <div class="row">
    <div *ngIf="onUpdate" id="user-info" class="workspace-panel-content col-md-12 text-left"
      [attr.data-user-id]="userInfo?.id">
      <table class="table table-hover">
        <tbody>
          <tr>
            <td class="col-md-2 col-title">
              <b>User Id</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.id}}
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Name</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.firstName + ' ' + userInfo?.lastName}}
              <span data-tooltip="Edit">
                <i class="fa fa-pencil archon-icon" (click)="focusOnInputBox()" data-toggle="modal"
                  data-target="#editProfileModal"></i>
              </span>
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Email</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.email}}
              <!-- <span>
                 <i class="fa fa-pencil archon-icon"  data-toggle="modal" data-target="#editProfileModal"></i>
                <i class="m-10 fa fa-pencil archon-icon"></i>                
              </span> -->
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Global Role</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              {{userInfo?.roleList?.join(', ')}}
              <!-- <span>
                <a [routerLink]="" class="m-10">Edit
                <i class="m-10 fa fa-pencil archon-icon"></i>
              </a>
              </span> -->
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>
          <tr>
              <td class="col-md-2 col-title">
                <b>Global Group</b>
              </td>
              <td *ngIf="userInfo" class="ws-info-data col-info-data">
                {{userInfo?.globalgroup}}
              </td>
              <td *ngIf="!userInfo" class="text-center">
                <i class="fa fa-spinner fa-spin loading"></i>
              </td>
            </tr>
          <tr>
            <td class="col-md-2 col-title">
              <b>Workspaces</b>
            </td>
            <td *ngIf="userInfo" class="ws-info-data col-info-data">
              <span class="m-r-10" *ngFor="let ws of userInfo.workspaceList; let isLast=last">
                <a (click)="setWorkspace(ws)">{{ws?.workspaceName}}</a>{{isLast ? '' : ', '}}
              </span>
              <span *ngIf="userInfo.workspaceList.length===0">No workspace avialable</span>
            </td>
            <td *ngIf="!userInfo" class="text-center">
              <i class="fa fa-spinner fa-spin loading"></i>
            </td>
          </tr>          
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-md-11 pull-right">
      <button (click)="gotoDashboard()" type="submit" class="m-10 btn btn-primary pull-right btn-form">Back</button>
    </div>
  </div>
</div>
<app-edit-profile [userid]="userInfo?.id" [firstName]="userInfo?.firstName" [lastName]="userInfo?.lastName" [useremail]="userInfo?.email"
 (UpdateProfile)="onUpdateProfile($event)"></app-edit-profile>
