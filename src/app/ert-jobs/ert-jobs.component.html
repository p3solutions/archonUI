<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <div class="col-md-1">
        <a (click)="gotoDashboard()" data-tooltip="Back">
          <i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i>
        </a>
      </div>
      <div class="col-md-8">
        <h3 style="margin: -2px;text-align: left">ERT</h3>
      </div>
    </div>
    <div class="col-md-3" style="text-align:left">
      <!-- <div id="success-msg" class="alert alert-success alert-dismissible">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <strong>Success!</strong> Job has started.
      </div> -->
    </div>

    <div class="col-md-3" style="text-align: right; margin-top: -9px;" *ngIf="ertService.mmrVersion !== ''">
      <a style="font-size: 34px; margin-right: 19px;" [routerLink]="['/workspace/ert/ert-jobs-config']" matTooltip="Add Job"><i class="fa fa-plus-circle"></i></a>

    </div>
    <div class="col-md-3" style="text-align: right;margin-top: -9px;" *ngIf="ertService.mmrVersion == ''">
        <a style="font-size: 34px; margin-right: 19px;color: grey" matTooltip="No MMR Version"><i class="fa fa-plus-circle"></i></a>
      </div>
  </div>
  <div *ngFor="let item of ertJobs" class="col-md-3 card">
      <div class="flex-cards-bar">
          <div class='title'>{{item.jobTitle===''?'No_title':item.jobTitle | titlecase}}<div class='info'><span (click)="showJobDetails(item.jobId)"  title="Click for more info"><i class="fa fa-info-circle" aria-hidden="true"></i></span></div></div>
           <!-- <div class='delete'><span data-toggle="modal" data-target="#confirm_model" (click)="setJobId(item.jobId)" title="Delete Job">X</span></div>  
   -->
   <div class='delete'>  <button type="button" class="close" data-toggle="modal" data-target="#confirm_model" (click)="setJobId(item.jobId)" title="Click for more info" >
    <span aria-hidden="true">&times;</span>
</button></div>
    </div>
    <div class="flex-cards-body">
        <div class='body-left'>Job Status</div><div class='body-center'>:</div><div class='body-right'> {{item.jobStatus}}</div>
        <div class='body-left'>Job Mode</div><div class='body-center'>:</div><div class='body-right'>{{item.jobMode}}</div>
        <div class='body-left'>Created Date</div><div class='body-center'>:</div><div class='body-right'> {{item.createdDate | date}}</div>
    </div><br>
   
    <div class="flex-cards-footer">
      <div class='foo-icon'><a [class.disabled]="item.madeDisable" title="Run Job" (click)="!madeDisable && openScheduleModel(item.jobId,item.jobStatus)"
       class="cursor-poniter fonticonbelow" ><i class="fa fa-play" aria-hidden="true"></i></a></div> 
        <div class='foo-iconedit'><span (click)="gotoEditJob(item.jobId)" title="Edit Job"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></span></div>
      </div>
  </div>
</div>
<button type="button" id="opneDetailPopup" style="display:none" class="btn btn-info btn-lg" data-toggle="modal"
  data-target="#job-detailConfig">Open Modal</button>
<div id="job-detailConfig" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
            <div class='model-title'><i class="fa fa-tachometer"></i><div class='info-r'>Job Dashboard</div></div>
          </div>
      <table class="table table-hover">    
          <tbody>
            <tr>
              <td class="tdl">Job Name</td>
              <td class="tdr">{{ertJobDetail.jobTitle | titlecase}}</td>
            </tr>
            <tr>
              <td class="tdl">Job Type</td>
              <td class="tdr">{{ertJobDetail.jobMode}}</td>
            </tr>
            <tr>
              <td class="tdl">Job Status</td>
              <td class="tdr">{{ertJobDetail.jobStatus}}</td>
            </tr>
       <tr>
              <td class="tdl">Created By</td>
              <td class="tdr">{{ertJobDetail.createdBy}}</td>
            </tr>
        <tr>
            <td class="tdl">Created Date</td>
            <td class="tdr"> {{ertJobDetail.createdDate | date}}</td>
          </tr>
        <tr>
            <td class="tdl">Last Accessed By</td>
            <td class="tdr">{{ertJobDetail.lastAccessedBy}}</td>
          </tr>
        <tr>
            <td class="tdl">Last Accessed Date</td>
            <td class="tdr">{{ertJobDetail.lastAccessedDate | date }}</td>
          </tr> 
        </tbody>
      </table>
      <div class="modal-footer">
        <button type="button" class="btn btn-default modal-close" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="confirm_model" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content" style="width: 430px;">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Confirm Job Delete</h4>
      </div>
      <div class="modal-body">
        <p style="text-align:left">Are you sure ?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="deleteErtJob()" data-dismiss="modal">YES</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal">NO</button>
      </div>
    </div>
  </div>
</div>
<app-schedule-job class="modal fade" id="openScheduleJob" role="dialog" (ObjectEmit)="runJob($event)"></app-schedule-job>
<button  data-toggle="modal" id="openScheduleModel" href="#openScheduleJob" data-keyboard="false" data-backdrop="static" style="display:none">Schedule</button>
<button #click data-toggle="modal" href="#successModel" [hidden]="true"></button>
<div id="successModel" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <h1>{{successMsg}}</h1>
        <p *ngIf="isSuccessMsg">check on Job Status page</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" (click)="close()">Close</button>
      </div>
    </div>
  </div>
</div>
